<div class="container mx-auto px-4 py-8 max-w-4xl">
  <div class="flex justify-between items-center mb-8">
    <h1 class="text-3xl font-bold">Edit Video</h1>
    <%= link_to "Back to Videos", studio_event_videos_path(event_id: @event_slug), class: "btn btn-outline" %>
  </div>

  <div class="card bg-base-100 border">
    <div class="card-body">
      <%= form_with url: studio_event_video_path(event_id: @event_slug, id: params[:id]), method: :patch, local: true do |form| %>
        <%= hidden_field_tag :index, params[:id] %>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="form-control md:col-span-2">
            <%= form.label :title, class: "label" %>
            <%= form.text_field :title, value: @video["title"], class: "input input-bordered w-full", required: true %>
          </div>

          <div class="form-control md:col-span-2">
            <%= form.label :raw_title, "Raw Title (original)", class: "label" %>
            <%= form.text_field :raw_title, value: @video["raw_title"], class: "input input-bordered w-full" %>
          </div>

          <div class="form-control md:col-span-2">
            <%= form.label :description, class: "label" %>
            <%= form.text_area :description, value: @video["description"], class: "textarea textarea-bordered w-full", rows: 4 %>
          </div>

          <div class="form-control">
            <%= form.label :video_provider, class: "label" %>
            <%= form.select :video_provider,
                  ["youtube", "vimeo", "mp4", "not_published", "not_recorded", "scheduled"],
                  {selected: @video["video_provider"]},
                  class: "select select-bordered w-full" %>
          </div>

          <div class="form-control">
            <%= form.label :video_id, "Video ID", class: "label" %>
            <%= form.text_field :video_id, value: @video["video_id"], class: "input input-bordered w-full" %>
          </div>

          <div class="form-control">
            <%= form.label :date, "Talk Date", class: "label" %>
            <%= form.date_field :date, value: @video["date"], class: "input input-bordered w-full" %>
          </div>

          <div class="form-control">
            <%= form.label :published_at, "Published Date", class: "label" %>
            <%= form.date_field :published_at, value: @video["published_at"], class: "input input-bordered w-full" %>
          </div>

          <div class="form-control">
            <%= form.label :language, class: "label" %>
            <%= form.select :language,
                  ["english", "spanish", "french", "german", "japanese", "portuguese", "russian", "chinese"],
                  {selected: @video["language"] || "english"},
                  class: "select select-bordered w-full" %>
          </div>

          <div class="form-control">
            <%= form.label :track, class: "label" %>
            <%= form.text_field :track, value: @video["track"], class: "input input-bordered w-full" %>
          </div>

          <div class="form-control md:col-span-2">
            <%= form.label :slides_url, "Slides URL", class: "label" %>
            <%= form.text_field :slides_url, value: @video["slides_url"], class: "input input-bordered w-full" %>
          </div>

          <div class="form-control md:col-span-2">
            <%= form.label :speakers, "Speakers (comma separated)", class: "label" %>
            <%= form.text_field :speakers, value: Array(@video["speakers"]).join(", "), class: "input input-bordered w-full" %>
          </div>

          <div class="divider md:col-span-2">Cue Points (optional)</div>

          <div class="form-control">
            <%= form.label :start_cue, "Start Cue", class: "label" %>
            <%= form.text_field :start_cue, value: @video["start_cue"], class: "input input-bordered w-full",
                  placeholder: "00:00:00" %>
          </div>

          <div class="form-control">
            <%= form.label :end_cue, "End Cue", class: "label" %>
            <%= form.text_field :end_cue, value: @video["end_cue"], class: "input input-bordered w-full",
                  placeholder: "00:45:00" %>
          </div>

          <div class="form-control">
            <%= form.label :thumbnail_cue, "Thumbnail Cue", class: "label" %>
            <%= form.text_field :thumbnail_cue, value: @video["thumbnail_cue"], class: "input input-bordered w-full",
                  placeholder: "00:00:05" %>
          </div>
        </div>

        <div class="form-control mt-6">
          <%= form.submit "Update Video", class: "btn btn-primary" %>
          <%= link_to "Cancel", studio_event_videos_path(event_id: @event_slug), class: "btn btn-outline ml-2" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
